@{
    ViewData["Title"] = "Report Issues";
}

<div class="header">
    <h2>Report an Issue</h2>
</div>

<div class="container">
    <!-- Container for Form and Progress Bar -->
    <div class="form-container">
        <!-- Form for Reporting an Issue -->
        <form id="reportForm" method="post" action="@Url.Action("SubmitIssue", "Home")" enctype="multipart/form-data" class="form-report">
            <div class="form-group">
                <label for="Location">Location:</label>
                <input type="text" class="form-control" id="Location" name="location" required />
            </div>

            <div class="form-group">
                <label for="Category">Category:</label>
                <select class="form-control" id="Category" name="category" required>
                    <option value="Sanitation">Sanitation</option>
                    <option value="Roads">Roads</option>
                    <option value="Infrastructure">Infrastructure</option>
                    <option value="Utilities">Utilities</option>
                </select>
            </div>

            <div class="form-group">
                <label for="Description">Description:</label>
                <textarea class="form-control" id="Description" name="description" rows="5" required></textarea>
            </div>

            <div class="form-group">
                <label for="Attachment">Attach Media:</label>
                <input type="file" class="form-control-file" id="Attachment" name="mediaAttachment" />
            </div>

            <!-- Buttons -->
            <div class="form-group button-group">
                <button type="submit" class="btn btn-submit" id="submitBtn">Submit</button>
                <a href="@Url.Action("Index", "Home")" class="btn btn-back">Back to Main Menu</a>
            </div>
            <!-- (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/progress, 2024) -->
            <div class="progress-section mt-0">
                <label id="ProgressLabel">Form Progress:</label>
                <div class="progress">
                    <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="mt-2">
                    <p id="MotivationalMessage" class="text-center"></p>
                </div>
            </div>

            <div class="mt-4 text-center">
                <label id="StatusMessage" class="text-success"></label>
            </div>
        </form>
    </div>
</div>
<!-- (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/progress, 2024) -->
@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('reportForm');
            const progressBar = document.getElementById('progressBar');
            const statusLabel = document.getElementById('StatusMessage');
            const motivationalMessage = document.getElementById('MotivationalMessage');

            function updateProgressBar() {
                const location = document.getElementById('Location').value;
                const category = document.getElementById('Category').value;
                const description = document.getElementById('Description').value;
                const attachment = document.getElementById('Attachment').files.length > 0;

                let progress = 0;
                if (location) progress += 25;
                if (category) progress += 25;
                if (description) progress += 25;
                if (attachment) progress += 25;

                progressBar.style.width = progress + '%';
                progressBar.setAttribute('aria-valuenow', progress);

                if (progress === 0) {
                    motivationalMessage.textContent = "Almost there!";
                } else if (progress <= 50) {
                    motivationalMessage.textContent = "Any problem?";
                } else if (progress < 100) {
                    motivationalMessage.textContent = "We will look into that!";
                } else if (progress === 100) {
                    motivationalMessage.textContent = "We appreciate your contribution!";
                }
            }

            document.getElementById('Location').addEventListener('input', updateProgressBar);
            document.getElementById('Category').addEventListener('change', updateProgressBar);
            document.getElementById('Description').addEventListener('input', updateProgressBar);
            document.getElementById('Attachment').addEventListener('change', updateProgressBar);

            form.addEventListener('submit', function (event) {
                const formData = new FormData(form);

                setTimeout(() => {
                    statusLabel.textContent = "Your issue has been submitted successfully!";
                    statusLabel.classList.add('text-success');
                }, 500); 
            });
        });
    </script>
}

<style>
    body {
        background-color: #f0f0f0; 
        margin: 0;
        font-family: Arial, sans-serif; 
    }

    .header {
        background-color: #FF0000; 
        border: 2px solid #FF0000; 
        padding: 15px 20px;
        text-align: center;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        width: 100%;
        box-sizing: border-box; 
        color: white; 
    }

        .header h2 {
            margin: 0;
            font-size: 1.8em; 
        }

    .container {
        max-width: 600px; 
        margin: 0 auto; 
        padding: 5px;
    }

    .form-container {
        border: 2px solid #FF0000; 
        border-radius: 5px; 
        padding: 10px;
        background-color: #ffffff; 
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); 
        transition: box-shadow 0.3s ease, transform 0.3s ease, background-color 0.3s ease; 
    }
    
        .form-container:hover {
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.6); 
            transform: scale(1.02); 
            background-color: #f8f8f8; 
        }

    .form-report .form-group {
        margin-bottom: 15px;
    }

        .form-report .form-group label {
            font-weight: bold; 
        }

    .button-group {
        display: flex;
        gap: 10px; 
    }

    .btn-submit, .btn-back {
        background-color: #FF0000; 
        border-color: #FF0000;
        color: white; 
        padding: 10px 20px;
        font-size: 0.9em;
        text-decoration: none;
        border-radius: 5px;
        display: inline-block;
        margin: 5px;
    }
        <!-- reference: https://stackoverflow.com/questions/27555515/textbox-css-hover-and-button-display-asp-net-c-sharp, 2015 -->
        .btn-submit:hover, .btn-back:hover {
            background-color: #cc0000; 
            border-color: #cc0000;
        }

    .progress-section {
        margin-top: 0; 
    }

    .progress {
        background-color: #f3f3f3;
        border-radius: 5px;
        height: 20px;
        width: 100%;
    }

    .progress-bar {
        background-color: #FF0000;
        height: 100%;
        line-height: 20px;
        color: white;
        text-align: center;
        border-radius: 5px;
    }

    #MotivationalMessage {
        font-size: 1em; 
        color: #FF0000;
        font-weight: bold;
    }

</style>









